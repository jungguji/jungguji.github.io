
<!DOCTYPE html>
<html lang="ko">
    
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="generator" content="저장하고 까먹자">
    <title>저장하고 까먹자</title>
    <meta name="author" content="Junggu Ji">
    
    
    
        
            <link rel="alternate" type="application/atom+xml" title="RSS" href="/atom.xml">
        
    
    <script type="application/ld+json">{"@context":"http://schema.org","@type":"Website","@id":"https://jungguji.github.io","author":{"@type":"Person","name":"Junggu Ji","sameAs":["https://github.com/jungguji","mailto"]},"name":"저장하고 까먹자","description":"","url":"https://jungguji.github.io"}</script>
    <meta property="og:type" content="blog">
<meta property="og:title" content="저장하고 까먹자">
<meta property="og:url" content="https://jungguji.github.io/page/7/index.html">
<meta property="og:site_name" content="저장하고 까먹자">
<meta property="og:locale" content="ko_KR">
<meta property="article:author" content="Junggu Ji">
<meta name="twitter:card" content="summary">
    
    
        
    
    
    
    
    
    <!--STYLES-->
    
<link rel="stylesheet" href="/assets/css/style-0v3zgfakrzmjoj7mhqewlnecogoqxgnfgvjlrw6b9na0ll2gjplxm4ld0oox.min.css">

    <!--STYLES END-->
    
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-162527815-1"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());

        gtag('config', 'UA-162527815-1');
    </script>


    

    

    <script data-ad-client="ca-pub-6264654331856753" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
</head>

    <body>
        <div id="blog">
            <!-- Define author's picture -->


    

<header id="header" data-behavior="1">
    <i id="btn-open-sidebar" class="fa fa-lg fa-bars"></i>
    <div class="header-title">
        <a class="header-title-link" href="/" aria-label>
            저장하고 까먹자
        </a>
    </div>
    
        
            <a class="header-right-picture " href="#about" aria-label="링크 열기: /#about">
        
        
        </a>
    
</header>

            <!-- Define author's picture -->


<nav id="sidebar" data-behavior="1">
    <div class="sidebar-container">
        
        
            <ul class="sidebar-buttons">
            
                <li class="sidebar-button">
                    
                        <a class="sidebar-button-link " href="/" rel="noopener" title="Home">
                        <i class="sidebar-button-icon fa fa-home" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">Home</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a class="sidebar-button-link " href="/all-categories" rel="noopener" title="카테고리">
                        <i class="sidebar-button-icon fa fa-bookmark" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">카테고리</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a class="sidebar-button-link " href="/all-tags" rel="noopener" title="태그">
                        <i class="sidebar-button-icon fa fa-tags" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">태그</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a class="sidebar-button-link " href="/all-archives" rel="noopener" title="아카이브">
                        <i class="sidebar-button-icon fa fa-archive" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">아카이브</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a class="sidebar-button-link " href="#about" rel="noopener" title="About">
                        <i class="sidebar-button-icon fa fa-question" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">About</span>
                    </a>
            </li>
            
        </ul>
        
            <ul class="sidebar-buttons">
            
                <li class="sidebar-button">
                    
                        <a class="sidebar-button-link " href="https://github.com/jungguji" target="_blank" rel="external nofollow noopener noreferrer" title="GitHub">
                        <i class="sidebar-button-icon fab fa-github" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">GitHub</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a class="sidebar-button-link " href="/mailto" rel="noopener" title="Mail">
                        <i class="sidebar-button-icon fa fa-envelope" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">Mail</span>
                    </a>
            </li>
            
        </ul>
        
            <ul class="sidebar-buttons">
            
                <li class="sidebar-button">
                    
                        <a class="sidebar-button-link " href="/atom.xml" rel="noopener" title="RSS">
                        <i class="sidebar-button-icon fa fa-rss" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">RSS</span>
                    </a>
            </li>
            
        </ul>
        
    </div>
</nav>

            
            <div id="main" data-behavior="1" class="
                        hasCoverMetaIn
                        ">
                <section class="postShorten-group main-content-wrap">
    
    
    <article class="postShorten postShorten--thumbnailimg-bottom">
        <div class="postShorten-wrap">
            
            <div class="postShorten-header">
                <h1 class="postShorten-title">
                    
                        <a class="link-unstyled" href="/2020/06/15/%ED%94%84%EB%A1%9C%EA%B7%B8%EB%9E%98%EB%A8%B8%EC%8A%A4-%ED%83%91/" aria-label=": 프로그래머스: 탑">
                            프로그래머스: 탑
                        </a>
                    
                </h1>
                <div class="postShorten-meta">
    <time datetime="2020-06-15T19:31:54+09:00">
	
		    2020/06/15
    	
    </time>
    
</div>

            </div>
            
                <div class="postShorten-content">
                    <h2 id="문제"><a href="#문제" class="headerlink" title="문제"></a>문제</h2><p><a target="_blank" rel="external nofollow noopener noreferrer" href="https://programmers.co.kr/learn/courses/30/lessons/42588">https://programmers.co.kr/learn/courses/30/lessons/42588</a></p>
<hr>
<h2 id="코드"><a href="#코드" class="headerlink" title="코드"></a>코드</h2><p><strong>본인의 코드가 아닌 해당 문제 최다 좋아요를 받은 코드</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">int</span>[] solution(<span class="keyword">int</span>[] heights) &#123;</span><br><span class="line">    Stack&lt;Tower&gt; st = <span class="keyword">new</span> Stack&lt;&gt;();</span><br><span class="line">    <span class="keyword">int</span>[] answer = <span class="keyword">new</span> <span class="keyword">int</span>[heights.length];</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; heights.length; i++) &#123;</span><br><span class="line">        Tower tower = <span class="keyword">new</span> Tower(i + <span class="number">1</span>, heights[i]);</span><br><span class="line">        <span class="keyword">int</span> receiveIdx = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">while</span> (!st.isEmpty()) &#123;</span><br><span class="line">            Tower top = st.peek();</span><br><span class="line"></span><br><span class="line">            <span class="keyword">if</span> (top.height &gt; tower.height) &#123;</span><br><span class="line">                receiveIdx = top.idx;</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            st.pop();</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        st.push(tower);</span><br><span class="line">        answer[i] = receiveIdx;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> answer;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Tower</span> </span>&#123;</span><br><span class="line">    <span class="keyword">int</span> idx;</span><br><span class="line">    <span class="keyword">int</span> height;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">Tower</span><span class="params">(<span class="keyword">int</span> idx, <span class="keyword">int</span> height)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.idx = idx;</span><br><span class="line">        <span class="keyword">this</span>.height = height;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>본인의 코드가 아닌 해당 문제 최다 좋아요를 받은 코드</strong></p>
<hr>
<h2 id="흐름"><a href="#흐름" class="headerlink" title="흐름"></a>흐름</h2><ol>
<li>탑의 index와 높이를 저장 할 Tower class 생성</li>
<li>탑의 개수만큼 반복</li>
<li>1 번쨰부터 시작되야하므로 현재 index에서 +1 한 index와 현재 높이를 갖는 tower를 생성</li>
<li>tower가 저장된 stack이 비었는지 체크</li>
<li>비어 있지 않다면 stack의 맨 위를 가져와서 현재 tower의 높이와 비교함</li>
<li>stack에 저장된 stack이 더 크다면 현재 타워에 전파를 받을 타워이므로 index를 receiveIdx 변수에 할당</li>
<li>크지 않다면 stack에 저장된 tower를 pop함</li>
<li>stack에 현재 tower를 push</li>
<li>answer에 아까 저장한 receiveIdx를 저장</li>
<li>answer return</li>
<li>끝</li>
</ol>
<hr>
<h2 id="결과"><a href="#결과" class="headerlink" title="결과"></a>결과</h2><table>
<thead>
<tr>
<th>번호</th>
<th>속도</th>
</tr>
</thead>
<tbody><tr>
<td>테스트 1</td>
<td>통과 (1.89ms, 50.7MB)</td>
</tr>
<tr>
<td>테스트 2</td>
<td>통과 (1.84ms, 52.6MB)</td>
</tr>
<tr>
<td>테스트 3</td>
<td>통과 (1.96ms, 52.3MB)</td>
</tr>
<tr>
<td>테스트 4</td>
<td>통과 (2.04ms, 52.5MB)</td>
</tr>
<tr>
<td>테스트 5</td>
<td>통과 (2.02ms, 50.8MB)</td>
</tr>
<tr>
<td>테스트 6</td>
<td>통과 (2.28ms, 52.7MB)</td>
</tr>
<tr>
<td>테스트 7</td>
<td>통과 (1.78ms, 52.6MB)</td>
</tr>
<tr>
<td>테스트 8</td>
<td>통과 (2.06ms, 52.1MB)</td>
</tr>
</tbody></table>
<hr>
<h2 id="테스트-케이스"><a href="#테스트-케이스" class="headerlink" title="테스트 케이스"></a>테스트 케이스</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">assertArrayEquals(<span class="keyword">new</span> <span class="keyword">int</span>[] &#123;<span class="number">0</span>,<span class="number">0</span>,<span class="number">2</span>,<span class="number">2</span>,<span class="number">4</span>&#125;, test.solution(<span class="keyword">new</span> <span class="keyword">int</span>[] &#123;<span class="number">6</span>,<span class="number">9</span>,<span class="number">5</span>,<span class="number">7</span>,<span class="number">4</span>&#125;));</span><br><span class="line">assertArrayEquals(<span class="keyword">new</span> <span class="keyword">int</span>[] &#123;<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">3</span>,<span class="number">3</span>,<span class="number">3</span>,<span class="number">6</span>&#125;, test.solution(<span class="keyword">new</span> <span class="keyword">int</span>[] &#123;<span class="number">3</span>,<span class="number">9</span>,<span class="number">9</span>,<span class="number">3</span>,<span class="number">5</span>,<span class="number">7</span>,<span class="number">2</span>&#125;));</span><br><span class="line">assertArrayEquals(<span class="keyword">new</span> <span class="keyword">int</span>[] &#123;<span class="number">0</span>,<span class="number">0</span>,<span class="number">2</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">5</span>,<span class="number">6</span>&#125;, test.solution(<span class="keyword">new</span> <span class="keyword">int</span>[] &#123;<span class="number">1</span>,<span class="number">5</span>,<span class="number">3</span>,<span class="number">6</span>,<span class="number">7</span>,<span class="number">6</span>,<span class="number">5</span>&#125;));</span><br></pre></td></tr></table></figure>

                    
                        


                    
                    
                        <p>
                            <a href="/2020/06/15/%ED%94%84%EB%A1%9C%EA%B7%B8%EB%9E%98%EB%A8%B8%EC%8A%A4-%ED%83%91/#post-footer" class="postShorten-excerpt_link link" aria-label>
                                댓글 공유
                            </a>
                        </p>
                    
                </div>
            
        </div>
        
            <a href="/2020/06/15/%ED%94%84%EB%A1%9C%EA%B7%B8%EB%9E%98%EB%A8%B8%EC%8A%A4-%ED%83%91/" aria-label=": 프로그래머스: 탑">
                <div class="postShorten-thumbnailimg">
                    <img alt src>
                </div>
            </a>
            
        
    </article>
    
    
    <article class="postShorten postShorten--thumbnailimg-bottom">
        <div class="postShorten-wrap">
            
            <div class="postShorten-header">
                <h1 class="postShorten-title">
                    
                        <a class="link-unstyled" href="/2020/06/15/%ED%94%84%EB%A1%9C%EA%B7%B8%EB%9E%98%EB%A8%B8%EC%8A%A4-%EC%87%A0%EB%A7%89%EB%8C%80%EA%B8%B0/" aria-label=": 프로그래머스: 쇠막대기">
                            프로그래머스: 쇠막대기
                        </a>
                    
                </h1>
                <div class="postShorten-meta">
    <time datetime="2020-06-15T18:49:30+09:00">
	
		    2020/06/15
    	
    </time>
    
</div>

            </div>
            
                <div class="postShorten-content">
                    <h2 id="문제"><a href="#문제" class="headerlink" title="문제"></a>문제</h2><p><a target="_blank" rel="external nofollow noopener noreferrer" href="https://programmers.co.kr/learn/courses/30/lessons/42585">https://programmers.co.kr/learn/courses/30/lessons/42585</a></p>
<hr>
<h2 id="코드"><a href="#코드" class="headerlink" title="코드"></a>코드</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">solution</span><span class="params">(String arrangement)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">char</span>[] ch = arrangement.toCharArray();</span><br><span class="line"></span><br><span class="line">    <span class="keyword">int</span> answer = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">char</span> pre = <span class="number">0</span>;</span><br><span class="line">    Stack&lt;Character&gt; stack = <span class="keyword">new</span> Stack&lt;Character&gt;();</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">char</span> c : ch) &#123;</span><br><span class="line">        <span class="keyword">if</span> (c == <span class="string">&#x27;(&#x27;</span>) &#123;</span><br><span class="line">            stack.push(c);</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            stack.pop();</span><br><span class="line">            <span class="keyword">if</span> (pre == c) &#123;</span><br><span class="line">                answer += <span class="number">1</span>;</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                answer += stack.size();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        pre  = c;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> answer;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<hr>
<h2 id="흐름"><a href="#흐름" class="headerlink" title="흐름"></a>흐름</h2><ol>
<li>문자열을 char array로 변경</li>
<li>char array를 반복하면서 문자가 ‘(‘ 인지 비교</li>
<li>맞으면 새 막대기가 시작되야 하므로 stack에 push 함</li>
<li>아니라면 레이저를 발사해서 stack을 잘라야 하므로 pop 하는데</li>
<li>이전 pop한 문자가 똑같이 ‘)’ 이라면 하나만 더 짤린 것이므로 +1 만하고</li>
<li>이전 문자가 ‘)’이 아니라면 stack의 크기가 막대의 개수 이므로 stack size만큼 더함</li>
<li>막대를 하나만 추가할 지 판단하기 위해 현재 문자를 저장함</li>
<li>문자열을 모두 반복 하면 끝</li>
</ol>
<hr>
<h2 id="결과"><a href="#결과" class="headerlink" title="결과"></a>결과</h2><table>
<thead>
<tr>
<th>번호</th>
<th>속도</th>
</tr>
</thead>
<tbody><tr>
<td>테스트 1</td>
<td>통과 (19.66ms, 51.2MB)</td>
</tr>
<tr>
<td>테스트 2</td>
<td>통과 (1.24ms, 53MB)</td>
</tr>
<tr>
<td>테스트 3</td>
<td>통과 (19.95ms, 51MB)</td>
</tr>
<tr>
<td>테스트 4</td>
<td>통과 (2.78ms, 53.1MB)</td>
</tr>
<tr>
<td>테스트 5</td>
<td>통과 (4.04ms, 53MB)</td>
</tr>
<tr>
<td>테스트 6</td>
<td>통과 (3.95ms, 52.8MB)</td>
</tr>
<tr>
<td>테스트 7</td>
<td>통과 (14.81ms, 52.5MB)</td>
</tr>
<tr>
<td>테스트 8</td>
<td>통과 (16.84ms, 52.6MB)</td>
</tr>
<tr>
<td>테스트 9</td>
<td>통과 (17.09ms, 52.8MB)</td>
</tr>
<tr>
<td>테스트 10</td>
<td>통과 (16.32ms, 52.6MB)</td>
</tr>
<tr>
<td>테스트 11</td>
<td>통과 (13.59ms, 52.2MB)</td>
</tr>
<tr>
<td>테스트 12</td>
<td>통과 (14.53ms, 50.6MB)</td>
</tr>
<tr>
<td>테스트 13</td>
<td>통과 (15.35ms, 52MB)</td>
</tr>
<tr>
<td>테스트 14</td>
<td>통과 (17.90ms, 50.4MB)</td>
</tr>
<tr>
<td>테스트 15</td>
<td>통과 (18.95ms, 52.3MB)</td>
</tr>
<tr>
<td>테스트 16</td>
<td>통과 (20.62ms, 50.7MB)</td>
</tr>
<tr>
<td>테스트 17</td>
<td>통과 (20.66ms, 53.1MB)</td>
</tr>
<tr>
<td>테스트 18</td>
<td>통과 (18.49ms, 52.8MB)</td>
</tr>
<tr>
<td>테스트 19</td>
<td>통과 (19.85ms, 53MB)</td>
</tr>
<tr>
<td>테스트 20</td>
<td>통과 (18.93ms, 52.5MB)</td>
</tr>
</tbody></table>
<hr>
<h2 id="테스트-케이스"><a href="#테스트-케이스" class="headerlink" title="테스트 케이스"></a>테스트 케이스</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">assertEquals(<span class="number">17</span>, test.solution(<span class="string">&quot;()(((()())(())()))(())&quot;</span>));</span><br><span class="line">assertEquals(<span class="number">18</span>, test.solution(<span class="string">&quot;(((((((((())))))))))&quot;</span>));</span><br></pre></td></tr></table></figure>

                    
                        


                    
                    
                        <p>
                            <a href="/2020/06/15/%ED%94%84%EB%A1%9C%EA%B7%B8%EB%9E%98%EB%A8%B8%EC%8A%A4-%EC%87%A0%EB%A7%89%EB%8C%80%EA%B8%B0/#post-footer" class="postShorten-excerpt_link link" aria-label>
                                댓글 공유
                            </a>
                        </p>
                    
                </div>
            
        </div>
        
            <a href="/2020/06/15/%ED%94%84%EB%A1%9C%EA%B7%B8%EB%9E%98%EB%A8%B8%EC%8A%A4-%EC%87%A0%EB%A7%89%EB%8C%80%EA%B8%B0/" aria-label=": 프로그래머스: 쇠막대기">
                <div class="postShorten-thumbnailimg">
                    <img alt src>
                </div>
            </a>
            
        
    </article>
    
    
    <article class="postShorten postShorten--thumbnailimg-bottom">
        <div class="postShorten-wrap">
            
            <div class="postShorten-header">
                <h1 class="postShorten-title">
                    
                        <a class="link-unstyled" href="/2020/06/15/%ED%94%84%EB%A1%9C%EA%B7%B8%EB%9E%98%EB%A8%B8%EC%8A%A4-%ED%83%80%EA%B2%9F%EB%84%98%EB%B2%84/" aria-label=": 프로그래머스: 타겟넘버">
                            프로그래머스: 타겟넘버
                        </a>
                    
                </h1>
                <div class="postShorten-meta">
    <time datetime="2020-06-15T15:57:20+09:00">
	
		    2020/06/15
    	
    </time>
    
</div>

            </div>
            
                <div class="postShorten-content">
                    <h2 id="문제"><a href="#문제" class="headerlink" title="문제"></a>문제</h2><p><a target="_blank" rel="external nofollow noopener noreferrer" href="https://programmers.co.kr/learn/courses/30/lessons/431650">https://programmers.co.kr/learn/courses/30/lessons/43165</a></p>
<hr>
<h2 id="코드"><a href="#코드" class="headerlink" title="코드"></a>코드</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">solution</span><span class="params">(<span class="keyword">int</span>[] numbers, <span class="keyword">int</span> target)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">int</span> answer = dfs(numbers, target, <span class="number">0</span>, <span class="number">0</span>);</span><br><span class="line">    <span class="keyword">return</span> answer;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">int</span> <span class="title">dfs</span><span class="params">(<span class="keyword">int</span>[] numbers, <span class="keyword">int</span> target, <span class="keyword">int</span> depth, <span class="keyword">int</span> sum)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (depth == numbers.length) &#123;</span><br><span class="line">        <span class="keyword">return</span> sum == target ? <span class="number">1</span> : <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">int</span> left = dfs(numbers, target, depth + <span class="number">1</span>, sum + numbers[depth]);</span><br><span class="line">    <span class="keyword">int</span> right = dfs(numbers, target, depth + <span class="number">1</span>, sum - numbers[depth]);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> left + right;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<hr>
<h2 id="흐름"><a href="#흐름" class="headerlink" title="흐름"></a>흐름</h2><ul>
<li>DFS 알고리즘 (재귀) 으로 해결</li>
<li>array index를 depth로 치고 모든 경우의 수를 탐색</li>
</ul>
<ol>
<li>0 번째 인덱스부터 시작</li>
<li>depth가 array length와 같으면 제일 깊은 곳 까지 모두 탐색한 것이므로</li>
<li>합이 target과 같은 지 판단해서 같으면 1, 다르면 0을 return</li>
<li>depth가 length와 다르면, 더 깊이 들어가야 하므로 dfs() 메서드를 depth + 1 하고 해당 깊이 까진 더 한 값을 파라미터로 넘김</li>
<li>2번부터 다시 반복</li>
<li>끝</li>
</ol>
<hr>
<h2 id="마지막-return-부연-설명"><a href="#마지막-return-부연-설명" class="headerlink" title="마지막 return 부연 설명"></a>마지막 return 부연 설명</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> (depth == numbers.length) &#123;</span><br><span class="line">    <span class="keyword">return</span> sum == target ? <span class="number">1</span> : <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><img src="https://t1.daumcdn.net/cfile/tistory/99B7003A5C0D2D4039?download" alt="트리"></p>
<ul>
<li>이미지 출처 <a target="_blank" rel="external nofollow noopener noreferrer" href="https://lkhlkh23.tistory.com/74">https://lkhlkh23.tistory.com/74</a></li>
</ul>
<ol>
<li>맨 아래에서 맨 왼쪽 1+1+1+1+1은 3이 아니므로 0</li>
<li>그 옆 1+1+1+1-1은 3이므로 1 return</li>
<li>그럼 그 윗 노드인 1+1+1+1은 1</li>
<li>다음 탐색 순서인 1+1+1-1+1은 3이므로 1 return</li>
<li>1+1+1-1-1 = 1 이므로 0 return</li>
<li>이들의 부모 노드인 1+1+1-1은 1</li>
<li>그 위 부모 노드는 1 + 1 이므로 2가 됨</li>
<li>이런 식으로 마지막 까지 올라가면 결국 +1에선 4, -1 에선 1 되서 정답인 5를 return하게 되고</li>
<li>실제로 양수로 시작하는 부분에선 4개의 경우가 3이 return 되고, 음수로 시작하는 경우에는 1이 return 되므로 정답임을 알 수 있다.</li>
</ol>
<hr>
<h2 id="결과"><a href="#결과" class="headerlink" title="결과"></a>결과</h2><table>
<thead>
<tr>
<th>번호</th>
<th>속도</th>
</tr>
</thead>
<tbody><tr>
<td>테스트 1</td>
<td>통과 (6.69ms, 54.4MB)</td>
</tr>
<tr>
<td>테스트 2</td>
<td>통과 (6.56ms, 52.9MB)</td>
</tr>
<tr>
<td>테스트 3</td>
<td>통과 (0.97ms, 52.8MB)</td>
</tr>
<tr>
<td>테스트 4</td>
<td>통과 (1.26ms, 50.9MB)</td>
</tr>
<tr>
<td>테스트 5</td>
<td>통과 (1.75ms, 50.1MB)</td>
</tr>
<tr>
<td>테스트 6</td>
<td>통과 (1.00ms, 52.3MB)</td>
</tr>
<tr>
<td>테스트 7</td>
<td>통과 (0.93ms, 52.5MB)</td>
</tr>
<tr>
<td>테스트 8</td>
<td>통과 (1.44ms, 52.6MB)</td>
</tr>
</tbody></table>
<hr>
<h2 id="테스트-케이스"><a href="#테스트-케이스" class="headerlink" title="테스트 케이스"></a>테스트 케이스</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">assertEquals(<span class="number">5</span>, test.solution(<span class="keyword">new</span> <span class="keyword">int</span>[] &#123;<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>&#125;, <span class="number">3</span>));</span><br><span class="line">assertEquals(<span class="number">3</span>, test.solution(<span class="keyword">new</span> <span class="keyword">int</span>[] &#123;<span class="number">2</span>,<span class="number">3</span>,<span class="number">5</span>,<span class="number">7</span>,<span class="number">9</span>&#125;, <span class="number">2</span>));</span><br><span class="line">assertEquals(<span class="number">1</span>, test.solution(<span class="keyword">new</span> <span class="keyword">int</span>[] &#123;<span class="number">1</span>&#125;, <span class="number">1</span>));</span><br><span class="line">assertEquals(<span class="number">5</span>, test.solution(<span class="keyword">new</span> <span class="keyword">int</span>[] &#123;<span class="number">6</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">6</span>,<span class="number">7</span>,<span class="number">1</span>&#125;, <span class="number">7</span>));</span><br></pre></td></tr></table></figure>

<hr>
<h2 id="참고-사이트"><a href="#참고-사이트" class="headerlink" title="참고 사이트"></a>참고 사이트</h2><ul>
<li><a target="_blank" rel="external nofollow noopener noreferrer" href="https://lkhlkh23.tistory.com/74">https://lkhlkh23.tistory.com/74</a></li>
<li><a target="_blank" rel="external nofollow noopener noreferrer" href="https://stackoverflow.com/questions/3332947/when-is-it-practical-to-use-depth-first-search-dfs-vs-breadth-first-search-bf">DFS와 BFS를 사용해야 되는 문제의 차이</a></li>
</ul>

                    
                        


                    
                    
                        <p>
                            <a href="/2020/06/15/%ED%94%84%EB%A1%9C%EA%B7%B8%EB%9E%98%EB%A8%B8%EC%8A%A4-%ED%83%80%EA%B2%9F%EB%84%98%EB%B2%84/#post-footer" class="postShorten-excerpt_link link" aria-label>
                                댓글 공유
                            </a>
                        </p>
                    
                </div>
            
        </div>
        
            <a href="/2020/06/15/%ED%94%84%EB%A1%9C%EA%B7%B8%EB%9E%98%EB%A8%B8%EC%8A%A4-%ED%83%80%EA%B2%9F%EB%84%98%EB%B2%84/" aria-label=": 프로그래머스: 타겟넘버">
                <div class="postShorten-thumbnailimg">
                    <img alt src>
                </div>
            </a>
            
        
    </article>
    
    
    <article class="postShorten postShorten--thumbnailimg-bottom">
        <div class="postShorten-wrap">
            
            <div class="postShorten-header">
                <h1 class="postShorten-title">
                    
                        <a class="link-unstyled" href="/2020/06/11/%ED%94%84%EB%A1%9C%EA%B7%B8%EB%9E%98%EB%A8%B8%EC%8A%A4-%EC%B9%B4%EC%B9%B4%EC%98%A4-%ED%94%84%EB%A0%8C%EC%A6%88-%EC%BB%AC%EB%9F%AC%EB%A7%81%EB%B6%81/" aria-label=": 프로그래머스: 카카오 프렌즈 컬러링북">
                            프로그래머스: 카카오 프렌즈 컬러링북
                        </a>
                    
                </h1>
                <div class="postShorten-meta">
    <time datetime="2020-06-11T14:40:03+09:00">
	
		    2020/06/11
    	
    </time>
    
</div>

            </div>
            
                <div class="postShorten-content">
                    <h2 id="문제"><a href="#문제" class="headerlink" title="문제"></a>문제</h2><p><a target="_blank" rel="external nofollow noopener noreferrer" href="https://programmers.co.kr/learn/courses/30/lessons/1829">https://programmers.co.kr/learn/courses/30/lessons/1829</a></p>
<hr>
<ul>
<li><a target="_blank" rel="external nofollow noopener noreferrer" href="https://namu.wiki/w/BFS#s-1">BFS(너비 우선 탐색)</a> 알고리즘으로 해결</li>
</ul>
<h2 id="코드"><a href="#코드" class="headerlink" title="코드"></a>코드</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">int</span>[] solution(<span class="keyword">int</span> m, <span class="keyword">int</span> n, <span class="keyword">int</span>[][] picture) &#123;</span><br><span class="line">    <span class="keyword">int</span> numberOfArea = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">int</span> maxSizeOfOneArea = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">boolean</span>[][] isPassedArea = <span class="keyword">new</span> <span class="keyword">boolean</span>[m][n];</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; m; i++) &#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">0</span>; j &lt; n; j++) &#123;</span><br><span class="line"></span><br><span class="line">            <span class="keyword">if</span> (picture[i][j] == <span class="number">0</span> || isPassedArea[i][j]) &#123;</span><br><span class="line">                <span class="keyword">continue</span>;</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            <span class="keyword">int</span> areaRange = breadthFirstSearch(i, j, picture, isPassedArea);</span><br><span class="line">            maxSizeOfOneArea = (maxSizeOfOneArea &lt; areaRange) ? areaRange : maxSizeOfOneArea;</span><br><span class="line">            ++numberOfArea;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">int</span>[] answer = <span class="keyword">new</span> <span class="keyword">int</span>[<span class="number">2</span>];</span><br><span class="line">    answer[<span class="number">0</span>] = numberOfArea;</span><br><span class="line">    answer[<span class="number">1</span>] = maxSizeOfOneArea;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> answer;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">int</span> <span class="title">breadthFirstSearch</span><span class="params">(<span class="keyword">int</span> x, <span class="keyword">int</span> y, <span class="keyword">int</span>[][] picture, <span class="keyword">boolean</span>[][] isPassedArea)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">final</span> <span class="keyword">int</span>[] xAround = <span class="keyword">new</span> <span class="keyword">int</span>[]&#123;<span class="number">1</span>, -<span class="number">1</span>, <span class="number">0</span>, <span class="number">0</span>&#125;;</span><br><span class="line">    <span class="keyword">final</span> <span class="keyword">int</span>[] yAround = <span class="keyword">new</span> <span class="keyword">int</span>[]&#123;<span class="number">0</span>, <span class="number">0</span>, <span class="number">1</span>, -<span class="number">1</span>&#125;;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">int</span> areaRange = <span class="number">1</span>;</span><br><span class="line"></span><br><span class="line">    Queue&lt;Position&gt; queue = <span class="keyword">new</span> LinkedList&lt;Position&gt;();</span><br><span class="line"></span><br><span class="line">    setPassedArea(isPassedArea, queue, x, y);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">while</span> (!queue.isEmpty()) &#123;</span><br><span class="line">        Position currentPosition = queue.poll();</span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; xAround.length; i++) &#123;</span><br><span class="line">            <span class="keyword">int</span> moveX = xAround[i] + currentPosition.x;</span><br><span class="line">            <span class="keyword">int</span> moveY = yAround[i] + currentPosition.y;</span><br><span class="line"></span><br><span class="line">            <span class="keyword">if</span> (!isSameAreaValidation(moveX, moveY, picture, isPassedArea, currentPosition)) &#123;</span><br><span class="line">                <span class="keyword">continue</span>;</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            setPassedArea(isPassedArea, queue, moveX, moveY);</span><br><span class="line">            ++areaRange;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> areaRange;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">boolean</span> <span class="title">isSameAreaValidation</span><span class="params">(<span class="keyword">int</span> moveX, <span class="keyword">int</span> moveY, <span class="keyword">int</span>[][] picture, <span class="keyword">boolean</span>[][] isPassedArea, Position currentPosition)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (isOutOfPicture(moveX, moveY, picture)) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (picture[moveX][moveY] == <span class="number">0</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (isPassedArea[moveX][moveY]) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (picture[currentPosition.x][currentPosition.y] != picture[moveX][moveY]) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">boolean</span> <span class="title">isOutOfPicture</span><span class="params">(<span class="keyword">int</span> moveX, <span class="keyword">int</span> moveY, <span class="keyword">int</span>[][] picture)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (moveX &lt; <span class="number">0</span> || moveY &lt; <span class="number">0</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (picture.length &lt;= moveX || picture[<span class="number">0</span>].length &lt;= moveY) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">setPassedArea</span><span class="params">(<span class="keyword">boolean</span>[][] isPassedArea, Queue&lt;Position&gt; queue, <span class="keyword">int</span> x, <span class="keyword">int</span> y)</span> </span>&#123;</span><br><span class="line">    isPassedArea[x][y] = <span class="keyword">true</span>;</span><br><span class="line">    queue.offer(<span class="keyword">new</span> Position(x, y));</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Position</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span> x = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span> y = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">Position</span><span class="params">(<span class="keyword">int</span> x, <span class="keyword">int</span> y)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.x = x;</span><br><span class="line">        <span class="keyword">this</span>.y = y;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<hr>
<h2 id="흐름"><a href="#흐름" class="headerlink" title="흐름"></a>흐름</h2><ol>
<li>이미 지나온 배열인지 확인하기 위해 picture array와 똑같은 크기의 boolean array를 만듦</li>
<li>2차원 배열 크기만큼 돌면서 picture[i][j] value가 0이거나 이미 지나온 길이면 찾아갈 필요가 없으므로 continute 해서 길을 찾지 않음</li>
<li>아니면 좌표 x,y를 저장할 class를 담는 Queue를 생성함</li>
<li>queue에 현재 좌표를 저장하고 boolean array[x][y]를 true로 할당</li>
<li>queue에 있는 값을 하나씩 꺼내면서 queue가 전부 비워질 때까지 반복</li>
<li>queue에서 꺼낸 현재 좌표에서 상하 좌우를 비교해서 같은지 판단해야 하므로 현재 좌표에서 x -1 , +1, y +1, -1 씩 돌아가면서 판단할 좌표를 구함</li>
<li>구한 좌표가 validation을 통과하면 4번과 마찬가지로 좌표를 queue에 저장하고 true로 변경<ol>
<li>구한 좌표 x, y가 array 범위를 넘어가진 않는 지</li>
<li>구한 좌표의 value가 0이 아닌 값 인지</li>
<li>구한 좌표가 이미 지나간 길이 아닌지</li>
<li>구한 좌표의 value가 현재 좌표의 value와 같은 지</li>
<li>위 4가지를 모두 통과해야 validation 통과</li>
</ol>
</li>
<li>현재 영역의 크기를 증가시킴</li>
<li>queue가 전부 비워지면 영역의 크기를 return해서 이전에 구한 영역의 크기와 비교해서 큰 값을 저장</li>
<li>영역 개수를 증가시킴</li>
<li>끝</li>
</ol>
<hr>
<h2 id="결과"><a href="#결과" class="headerlink" title="결과"></a>결과</h2><p><img src="/images/20200611/%EA%B2%B0%EA%B3%BC.PNG" alt="결과"></p>
<hr>
<h2 id="테스트-케이스"><a href="#테스트-케이스" class="headerlink" title="테스트 케이스"></a>테스트 케이스</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">int</span>[][] picture = <span class="keyword">new</span> <span class="keyword">int</span>[][] &#123;&#123;<span class="number">1</span>, <span class="number">1</span>, <span class="number">1</span>, <span class="number">0</span>&#125;, &#123;<span class="number">1</span>, <span class="number">2</span>, <span class="number">2</span>, <span class="number">0</span>&#125;, &#123;<span class="number">1</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">1</span>&#125;, &#123;<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">1</span>&#125;, &#123;<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">3</span>&#125;, &#123;<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">3</span>&#125;&#125;;</span><br><span class="line">assertArrayEquals(<span class="keyword">new</span> <span class="keyword">int</span>[] &#123;<span class="number">4</span> , <span class="number">5</span>&#125;, test.solution(<span class="number">6</span>, <span class="number">4</span>, picture));</span><br><span class="line"></span><br><span class="line"><span class="keyword">int</span>[][] picture1 = <span class="keyword">new</span> <span class="keyword">int</span>[][] &#123;&#123;<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>&#125;, &#123;<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>&#125;, &#123;<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>&#125;, &#123;<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>&#125;, &#123;<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>&#125;&#125;;</span><br><span class="line">assertArrayEquals(<span class="keyword">new</span> <span class="keyword">int</span>[] &#123;<span class="number">0</span> , <span class="number">0</span>&#125;, test.solution(<span class="number">5</span>, <span class="number">5</span>, picture1));</span><br><span class="line"></span><br><span class="line"><span class="keyword">int</span>[][] picture2 = <span class="keyword">new</span> <span class="keyword">int</span>[][] &#123;&#123;<span class="number">1</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>&#125;, &#123;<span class="number">0</span>, <span class="number">0</span>, <span class="number">1</span>, <span class="number">0</span>, <span class="number">0</span>&#125;, &#123;<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>&#125;, &#123;<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>&#125;, &#123;<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">1</span>&#125;&#125;;</span><br><span class="line">assertArrayEquals(<span class="keyword">new</span> <span class="keyword">int</span>[] &#123;<span class="number">3</span> , <span class="number">1</span>&#125;, test.solution(<span class="number">5</span>, <span class="number">5</span>, picture2));</span><br><span class="line"></span><br><span class="line"><span class="keyword">int</span>[][] picture3 = <span class="keyword">new</span> <span class="keyword">int</span>[][] &#123;&#123;<span class="number">1</span>, <span class="number">1</span>, <span class="number">1</span>, <span class="number">1</span>, <span class="number">1</span>&#125;, &#123;<span class="number">1</span>, <span class="number">1</span>, <span class="number">1</span>, <span class="number">1</span>, <span class="number">1</span>&#125;, &#123;<span class="number">1</span>, <span class="number">1</span>, <span class="number">1</span>, <span class="number">1</span>, <span class="number">1</span>&#125;, &#123;<span class="number">1</span>, <span class="number">1</span>, <span class="number">1</span>, <span class="number">1</span>, <span class="number">1</span>&#125;, &#123;<span class="number">1</span>, <span class="number">1</span>, <span class="number">1</span>, <span class="number">1</span>, <span class="number">1</span>&#125;&#125;;</span><br><span class="line">assertArrayEquals(<span class="keyword">new</span> <span class="keyword">int</span>[] &#123;<span class="number">1</span> , <span class="number">25</span>&#125;, test.solution(<span class="number">5</span>, <span class="number">5</span>, picture3));</span><br><span class="line"></span><br><span class="line"><span class="keyword">int</span>[][] picture4 = <span class="keyword">new</span> <span class="keyword">int</span>[][] &#123;&#123;<span class="number">1</span>, <span class="number">1</span>, <span class="number">1</span>, <span class="number">1</span>, <span class="number">1</span>&#125;, &#123;<span class="number">1</span>, <span class="number">1</span>, <span class="number">1</span>, <span class="number">1</span>, <span class="number">1</span>&#125;, &#123;<span class="number">1</span>, <span class="number">1</span>, <span class="number">100</span>, <span class="number">1</span>, <span class="number">1</span>&#125;, &#123;<span class="number">1</span>, <span class="number">1</span>, <span class="number">1</span>, <span class="number">1</span>, <span class="number">1</span>&#125;, &#123;<span class="number">1</span>, <span class="number">1</span>, <span class="number">1</span>, <span class="number">1</span>, <span class="number">1</span>&#125;&#125;;</span><br><span class="line">assertArrayEquals(<span class="keyword">new</span> <span class="keyword">int</span>[] &#123;<span class="number">2</span> , <span class="number">24</span>&#125;, test.solution(<span class="number">5</span>, <span class="number">5</span>, picture4));</span><br><span class="line"></span><br><span class="line"><span class="keyword">int</span>[][] picture5 = <span class="keyword">new</span> <span class="keyword">int</span>[][] &#123;&#123;<span class="number">1</span>, <span class="number">1</span>, <span class="number">1</span>, <span class="number">0</span>&#125;, &#123;<span class="number">1</span>, <span class="number">1</span>, <span class="number">1</span>, <span class="number">0</span>&#125;, &#123;<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">1</span>&#125;, &#123;<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">1</span>&#125;, &#123;<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">1</span>&#125;, &#123;<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">1</span>&#125;&#125;;</span><br><span class="line">assertArrayEquals(<span class="keyword">new</span> <span class="keyword">int</span>[] &#123;<span class="number">2</span> , <span class="number">6</span>&#125;, test.solution(<span class="number">6</span>, <span class="number">4</span>, picture5));</span><br><span class="line"></span><br><span class="line"><span class="keyword">int</span>[][] picture6 = <span class="keyword">new</span> <span class="keyword">int</span>[][] &#123;&#123;<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">1</span>, <span class="number">1</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>&#125;, &#123;<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">1</span>, <span class="number">1</span>, <span class="number">1</span>, <span class="number">1</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>&#125;, &#123;<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">1</span>, <span class="number">1</span>, <span class="number">1</span>, <span class="number">1</span>, <span class="number">1</span>, <span class="number">1</span>, <span class="number">1</span>, <span class="number">1</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>&#125;, &#123;<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">1</span>, <span class="number">1</span>, <span class="number">1</span>, <span class="number">1</span>, <span class="number">1</span>, <span class="number">1</span>, <span class="number">1</span>, <span class="number">1</span>, <span class="number">1</span>, <span class="number">1</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>&#125;, &#123;<span class="number">0</span>, <span class="number">0</span>, <span class="number">1</span>, <span class="number">1</span>, <span class="number">1</span>, <span class="number">1</span>, <span class="number">1</span>, <span class="number">1</span>, <span class="number">1</span>, <span class="number">1</span>, <span class="number">1</span>, <span class="number">1</span>, <span class="number">1</span>, <span class="number">1</span>, <span class="number">0</span>, <span class="number">0</span>&#125;, &#123;<span class="number">0</span>, <span class="number">1</span>, <span class="number">1</span>, <span class="number">1</span>, <span class="number">1</span>, <span class="number">2</span>, <span class="number">1</span>, <span class="number">1</span>, <span class="number">1</span>, <span class="number">1</span>, <span class="number">2</span>, <span class="number">1</span>, <span class="number">1</span>, <span class="number">1</span>, <span class="number">1</span>, <span class="number">0</span>&#125;, &#123;<span class="number">0</span>, <span class="number">1</span>, <span class="number">1</span>, <span class="number">1</span>, <span class="number">2</span>, <span class="number">1</span>, <span class="number">2</span>, <span class="number">1</span>, <span class="number">1</span>, <span class="number">2</span>, <span class="number">1</span>, <span class="number">2</span>, <span class="number">1</span>, <span class="number">1</span>, <span class="number">1</span>, <span class="number">0</span>&#125;, &#123;<span class="number">0</span>, <span class="number">1</span>, <span class="number">1</span>, <span class="number">1</span>, <span class="number">1</span>, <span class="number">1</span>, <span class="number">1</span>, <span class="number">1</span>, <span class="number">1</span>, <span class="number">1</span>, <span class="number">1</span>, <span class="number">1</span>, <span class="number">1</span>, <span class="number">1</span>, <span class="number">1</span>, <span class="number">0</span>&#125;, &#123;<span class="number">0</span>, <span class="number">1</span>, <span class="number">3</span>, <span class="number">3</span>, <span class="number">3</span>, <span class="number">1</span>, <span class="number">1</span>, <span class="number">1</span>, <span class="number">1</span>, <span class="number">1</span>, <span class="number">1</span>, <span class="number">3</span>, <span class="number">3</span>, <span class="number">3</span>, <span class="number">1</span>, <span class="number">0</span>&#125;, &#123;<span class="number">0</span>, <span class="number">1</span>, <span class="number">1</span>, <span class="number">1</span>, <span class="number">1</span>, <span class="number">1</span>, <span class="number">2</span>, <span class="number">1</span>, <span class="number">1</span>, <span class="number">2</span>, <span class="number">1</span>, <span class="number">1</span>, <span class="number">1</span>, <span class="number">1</span>, <span class="number">1</span>, <span class="number">0</span>&#125;, &#123;<span class="number">0</span>, <span class="number">0</span>, <span class="number">1</span>, <span class="number">1</span>, <span class="number">1</span>, <span class="number">1</span>, <span class="number">1</span>, <span class="number">2</span>, <span class="number">2</span>, <span class="number">1</span>, <span class="number">1</span>, <span class="number">1</span>, <span class="number">1</span>, <span class="number">1</span>, <span class="number">0</span>, <span class="number">0</span>&#125;, &#123;<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">1</span>, <span class="number">1</span>, <span class="number">1</span>, <span class="number">1</span>, <span class="number">1</span>, <span class="number">1</span>, <span class="number">1</span>, <span class="number">1</span>, <span class="number">1</span>, <span class="number">1</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>&#125;, &#123;<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">1</span>, <span class="number">1</span>, <span class="number">1</span>, <span class="number">1</span>, <span class="number">1</span>, <span class="number">1</span>, <span class="number">1</span>, <span class="number">1</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>&#125;&#125;;</span><br><span class="line">assertArrayEquals(<span class="keyword">new</span> <span class="keyword">int</span>[] &#123;<span class="number">12</span> , <span class="number">120</span>&#125;, test.solution(<span class="number">13</span>, <span class="number">16</span>, picture6));</span><br></pre></td></tr></table></figure>

<hr>
<h2 id="참고-사이트"><a href="#참고-사이트" class="headerlink" title="참고 사이트"></a>참고 사이트</h2><ul>
<li><a target="_blank" rel="external nofollow noopener noreferrer" href="https://soobarkbar.tistory.com/92">https://soobarkbar.tistory.com/92</a></li>
<li><a target="_blank" rel="external nofollow noopener noreferrer" href="https://gmlwjd9405.github.io/2018/08/15/algorithm-bfs.html">https://gmlwjd9405.github.io/2018/08/15/algorithm-bfs.html</a></li>
<li><a target="_blank" rel="external nofollow noopener noreferrer" href="https://namu.wiki/w/BFS#s-1">https://namu.wiki/w/BFS#s-1</a></li>
</ul>

                    
                        


                    
                    
                        <p>
                            <a href="/2020/06/11/%ED%94%84%EB%A1%9C%EA%B7%B8%EB%9E%98%EB%A8%B8%EC%8A%A4-%EC%B9%B4%EC%B9%B4%EC%98%A4-%ED%94%84%EB%A0%8C%EC%A6%88-%EC%BB%AC%EB%9F%AC%EB%A7%81%EB%B6%81/#post-footer" class="postShorten-excerpt_link link" aria-label>
                                댓글 공유
                            </a>
                        </p>
                    
                </div>
            
        </div>
        
            <a href="/2020/06/11/%ED%94%84%EB%A1%9C%EA%B7%B8%EB%9E%98%EB%A8%B8%EC%8A%A4-%EC%B9%B4%EC%B9%B4%EC%98%A4-%ED%94%84%EB%A0%8C%EC%A6%88-%EC%BB%AC%EB%9F%AC%EB%A7%81%EB%B6%81/" aria-label=": 프로그래머스: 카카오 프렌즈 컬러링북">
                <div class="postShorten-thumbnailimg">
                    <img alt src>
                </div>
            </a>
            
        
    </article>
    
    
    <article class="postShorten postShorten--thumbnailimg-bottom">
        <div class="postShorten-wrap">
            
            <div class="postShorten-header">
                <h1 class="postShorten-title">
                    
                        <a class="link-unstyled" href="/2020/06/09/BDDMockito-given-%EC%82%AC%EC%9A%A9%EC%8B%9C-%EC%A3%BC%EC%9D%98/" aria-label=": BDDMockito given 사용시 주의">
                            BDDMockito given 사용시 주의
                        </a>
                    
                </h1>
                <div class="postShorten-meta">
    <time datetime="2020-06-09T13:04:42+09:00">
	
		    2020/06/09
    	
    </time>
    
</div>

            </div>
            
                <div class="postShorten-content">
                    <h2 id="문제"><a href="#문제" class="headerlink" title="문제"></a>문제</h2><h3 id="Test-Code"><a href="#Test-Code" class="headerlink" title="Test Code"></a>Test Code</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">testCreateWordFail</span><span class="params">()</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">    <span class="comment">// gvien</span></span><br><span class="line">    BindingResult bindingResult = <span class="keyword">new</span> MapBindingResult(<span class="keyword">new</span> HashMap(), <span class="string">&quot;&quot;</span>);</span><br><span class="line">    bindingResult.rejectValue(<span class="string">&quot;test&quot;</span>, <span class="string">&quot;test&quot;</span>, <span class="string">&quot;haha&quot;</span>);</span><br><span class="line"></span><br><span class="line">    WordDTO.AddWord addWord = <span class="keyword">new</span> WordDTO.AddWord();</span><br><span class="line">    addWord.setWord(<span class="string">&quot;test&quot;</span>);</span><br><span class="line">    addWord.setMeaning(<span class="string">&quot;테스트&quot;</span>);</span><br><span class="line"></span><br><span class="line">    given(<span class="keyword">this</span>.service.getCreateWordBindingResult(addWord, bindingResult)).willReturn(bindingResult);</span><br><span class="line"></span><br><span class="line">    String addWordToJson = getAddWordToJson();</span><br><span class="line"></span><br><span class="line">    <span class="comment">//when</span></span><br><span class="line">    ResultActions action = mockMvc.perform(post(<span class="string">&quot;/word/add&quot;</span>)</span><br><span class="line">            .param(<span class="string">&quot;save&quot;</span>, <span class="string">&quot;&quot;</span>)</span><br><span class="line">            .content(addWordToJson)</span><br><span class="line">            .contentType(MediaType.APPLICATION_JSON)</span><br><span class="line">            .with(csrf()))</span><br><span class="line">            .andDo(print());</span><br><span class="line"></span><br><span class="line">    <span class="comment">//then</span></span><br><span class="line">    action.andExpect(status().isOk())</span><br><span class="line">            .andExpect(view().name(<span class="string">&quot;thymeleaf/word/createWordForm&quot;</span>));</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>위 코드처럼 this.service.getCreateWordBindingResult(addWord, bindingResult) method가 호출될 때 willdReturn으로 지정한 bindingResult가 return되게 하고 하려했으나 given이 제대로 동작하지 않아서 인지 getCreateWordBindingResult method 안에서 result가 존재하지 않아 NullPointerException이 발생하여 테스트가 실패했다.</p>
<h3 id="Test-Target"><a href="#Test-Target" class="headerlink" title="Test Target"></a>Test Target</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@PostMapping(value=&quot;/word/add&quot;, params= &#123;&quot;save&quot;&#125;)</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> String <span class="title">createWord</span><span class="params">(<span class="meta">@Valid</span> AddWord word, BindingResult bindingResult)</span> </span>&#123;</span><br><span class="line">    BindingResult result = service.getCreateWordBindingResult(word, bindingResult);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (result.hasErrors()) &#123; <span class="comment">// NullPointerException 발생</span></span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;thymeleaf/word/createWordForm&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    service.insertWord(word);</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&quot;thymeleaf/index&quot;</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<hr>
<h2 id="해결"><a href="#해결" class="headerlink" title="해결"></a>해결</h2><p>ArgumentMatchers class에 <a target="_blank" rel="external nofollow noopener noreferrer" href="https://javadoc.io/doc/org.mockito/mockito-core/2.2.7/org/mockito/ArgumentMatchers.html#any(java.lang.Class)">any()</a>를 이용해서 파라미터를 넘겼더니 정상적으로 동작했다.</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">given(<span class="keyword">this</span>.service.getCreateWordBindingResult(any(WordDTO.AddWord.class), any(BindingResult.class))).willReturn(bindingResult);</span><br></pre></td></tr></table></figure>

<ul>
<li>p.s : 기본 자료형 (int, char)이나 String 등은 any()를 사용하지 않고 그대로 파라미터로 받아도 정상적으로 동작하는 것 같은데 어째서 따로 정의한 클래스만 인식(?) 하지 못해서 willReturn이 먹히지 않고 null이 return 되는지 알 수가 없었다.</li>
</ul>
<hr>
<h2 id="전체-코드"><a href="#전체-코드" class="headerlink" title="전체 코드"></a>전체 코드</h2><ul>
<li><a target="_blank" rel="external nofollow noopener noreferrer" href="https://github.com/jungguji/wordbook">https://github.com/jungguji/wordbook</a></li>
</ul>

                    
                        


                    
                    
                        <p>
                            <a href="/2020/06/09/BDDMockito-given-%EC%82%AC%EC%9A%A9%EC%8B%9C-%EC%A3%BC%EC%9D%98/#post-footer" class="postShorten-excerpt_link link" aria-label>
                                댓글 공유
                            </a>
                        </p>
                    
                </div>
            
        </div>
        
            <a href="/2020/06/09/BDDMockito-given-%EC%82%AC%EC%9A%A9%EC%8B%9C-%EC%A3%BC%EC%9D%98/" aria-label=": BDDMockito given 사용시 주의">
                <div class="postShorten-thumbnailimg">
                    <img alt src>
                </div>
            </a>
            
        
    </article>
    
    
    <article class="postShorten postShorten--thumbnailimg-bottom">
        <div class="postShorten-wrap">
            
            <div class="postShorten-header">
                <h1 class="postShorten-title">
                    
                        <a class="link-unstyled" href="/2020/06/09/Spring-Controller-Test%EC%8B%9C-CSRF-%EC%84%A4%EC%A0%95/" aria-label=": Spring Controller Test시 CSRF 설정">
                            Spring Controller Test시 CSRF 설정
                        </a>
                    
                </h1>
                <div class="postShorten-meta">
    <time datetime="2020-06-09T11:01:52+09:00">
	
		    2020/06/09
    	
    </time>
    
</div>

            </div>
            
                <div class="postShorten-content">
                    <h2 id="문제"><a href="#문제" class="headerlink" title="문제"></a>문제</h2><p>Spring Boot + thymeleaf으로 진행하던 프로젝트를 테스트 하던 중<br>Ajax로 호출하는 Methoed를 Test 하였더니 아래와 같이 403 error가 return 되면서 Test가 실패했다.</p>
<hr>
<h2 id="원인"><a href="#원인" class="headerlink" title="원인"></a>원인</h2><p>thymeleaf를 사용하면 기본적으로 CSRF 토큰을 넘겨주기 때문에 따로 csrf 토큰을 생성하지 않았으나, ajax에선 직접 csrf 토큰을 생성해서 넘겨줘야 하기 때문에 csrf 토큰을 생성해서 넘겨주도록 되어 있는데 Test 시에는 그렇지 않아서 <a target="_blank" rel="external nofollow noopener noreferrer" href="https://developer.mozilla.org/ko/docs/Web/HTTP/Status/403">403 Forbidden</a>가 발생한 것으로 보인다.</p>
<p><img src="/images/20200609/403%EC%97%90%EB%9F%AC.PNG" alt="403"></p>
<h3 id="thymeleaf-config-html"><a href="#thymeleaf-config-html" class="headerlink" title="thymeleaf config.html"></a>thymeleaf config.html</h3><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">meta</span> <span class="attr">id</span>=<span class="string">&quot;_csrf&quot;</span> <span class="attr">name</span>=<span class="string">&quot;_csrf&quot;</span> <span class="attr">th:content</span>=<span class="string">&quot;$&#123;_csrf.token&#125;&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">meta</span> <span class="attr">id</span>=<span class="string">&quot;_csrf_header&quot;</span> <span class="attr">name</span>=<span class="string">&quot;_csrf_header&quot;</span> <span class="attr">th:content</span>=<span class="string">&quot;$&#123;_csrf.headerName&#125;&quot;</span>/&gt;</span></span><br></pre></td></tr></table></figure>

<h3 id="common-js"><a href="#common-js" class="headerlink" title="common.js"></a>common.js</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> token = $(<span class="string">&quot;meta[name=&#x27;_csrf&#x27;]&quot;</span>).attr(<span class="string">&quot;content&quot;</span>);</span><br><span class="line"><span class="keyword">const</span> header = $(<span class="string">&quot;meta[name=&#x27;_csrf_header&#x27;]&quot;</span>).attr(<span class="string">&quot;content&quot;</span>);</span><br></pre></td></tr></table></figure>

<hr>
<h2 id="해결"><a href="#해결" class="headerlink" title="해결"></a>해결</h2><p>mockMvc.perform에서 get, post 호출 시 SecurityMockMvcRequestPostProcessors 의 <a target="_blank" rel="external nofollow noopener noreferrer" href="https://docs.spring.io/spring-security/site/docs/4.2.13.RELEASE/apidocs/org/springframework/security/test/web/servlet/request/SecurityMockMvcRequestPostProcessors.html#csrf--">csrf()</a>를 <a target="_blank" rel="external nofollow noopener noreferrer" href="https://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/test/web/servlet/request/MockHttpServletRequestBuilder.html#with-org.springframework.test.web.servlet.request.RequestPostProcessor-">with()</a>로 파라미터에 추가한다.</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="keyword">static</span> org.springframework.security.test.web.servlet.request.SecurityMockMvcRequestPostProcessors.csrf;</span><br><span class="line"></span><br><span class="line">...</span><br><span class="line"></span><br><span class="line"><span class="comment">//when</span></span><br><span class="line">ResultActions action = mockMvc.perform(post(<span class="string">&quot;/word/add&quot;</span>)</span><br><span class="line">        .param(<span class="string">&quot;save&quot;</span>, <span class="string">&quot;&quot;</span>)</span><br><span class="line">        .content(addwordToJson)</span><br><span class="line">        .contentType(MediaType.APPLICATION_JSON)</span><br><span class="line">        .with(csrf())) <span class="comment">// 이 부분</span></span><br><span class="line">        .andDo(print());</span><br><span class="line"></span><br><span class="line">...</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>추가 한 후 다시 테스트 해보면 파라미터에 csrf 토큰이 생성되어 정상적으로 동작하는 것을 확인 할 수 있다.</p>
<figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">MockHttpServletRequest:</span><br><span class="line">      HTTP Method = POST</span><br><span class="line">      Request URI = /word/add</span><br><span class="line">       Parameters = &#123;save=[], _csrf=[6757e021-c0a3-4390-81d9-9c917d89c8c1]&#125; // 이 부분</span><br><span class="line">          Headers = [Content-Type:&quot;application/json&quot;, Content-Length:&quot;59&quot;]</span><br><span class="line">             Body = &lt;no character encoding set&gt;</span><br><span class="line">    Session Attrs = &#123;SPRING_SECURITY_CONTEXT=org.springframework.security.core.context.SecurityContextImpl@83a38fdf: Authentication: org.springframework.security.authentication.UsernamePasswordAuthenticationToken@83a38fdf: Principal: org.springframework.security.core.userdetails.User@31bf3c: Username: jgji; Password: [PROTECTED]; Enabled: true; AccountNonExpired: true; credentialsNonExpired: true; AccountNonLocked: true; Granted Authorities: ROLE_USER; Credentials: [PROTECTED]; Authenticated: true; Details: null; Granted Authorities: ROLE_USER&#125;</span><br><span class="line"></span><br><span class="line">...</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p><img src="/images/20200609/success.PNG" alt="성공"></p>
<hr>
<h2 id="참고-사이트"><a href="#참고-사이트" class="headerlink" title="참고 사이트"></a>참고 사이트</h2><ul>
<li><a target="_blank" rel="external nofollow noopener noreferrer" href="https://stackoverflow.com/questions/25605373/unit-testing-controllers-with-csrf-protection-enabled-in-spring-security">https://stackoverflow.com/questions/25605373/unit-testing-controllers-with-csrf-protection-enabled-in-spring-security</a></li>
</ul>
<hr>
<h2 id="전체-코드"><a href="#전체-코드" class="headerlink" title="전체 코드"></a>전체 코드</h2><ul>
<li><a target="_blank" rel="external nofollow noopener noreferrer" href="https://github.com/jungguji/wordbook/blob/master/src/test/java/com/jgji/spring/domain/word/controller/WordControllerTest.java">ControllerTest</a></li>
<li><a target="_blank" rel="external nofollow noopener noreferrer" href="https://github.com/jungguji/wordbook/blob/master/src/main/resources/templates/fragments/config.html">config.html</a></li>
<li><a target="_blank" rel="external nofollow noopener noreferrer" href="https://github.com/jungguji/wordbook/blob/master/src/main/resources/static/js/common.js">common.js</a></li>
</ul>

                    
                        


                    
                    
                        <p>
                            <a href="/2020/06/09/Spring-Controller-Test%EC%8B%9C-CSRF-%EC%84%A4%EC%A0%95/#post-footer" class="postShorten-excerpt_link link" aria-label>
                                댓글 공유
                            </a>
                        </p>
                    
                </div>
            
        </div>
        
            <a href="/2020/06/09/Spring-Controller-Test%EC%8B%9C-CSRF-%EC%84%A4%EC%A0%95/" aria-label=": Spring Controller Test시 CSRF 설정">
                <div class="postShorten-thumbnailimg">
                    <img alt src>
                </div>
            </a>
            
        
    </article>
    
    
    <article class="postShorten postShorten--thumbnailimg-bottom">
        <div class="postShorten-wrap">
            
            <div class="postShorten-header">
                <h1 class="postShorten-title">
                    
                        <a class="link-unstyled" href="/2020/06/08/Codedeploy-%EC%97%B0%EB%8F%99-%EC%97%90%EB%9F%AC/" aria-label=": Codedeploy 연동 중 발생한 에러">
                            Codedeploy 연동 중 발생한 에러
                        </a>
                    
                </h1>
                <div class="postShorten-meta">
    <time datetime="2020-06-08T15:08:41+09:00">
	
		    2020/06/08
    	
    </time>
    
</div>

            </div>
            
                <div class="postShorten-content">
                    <h2 id="Codedeploy에서-배포그룹-생성-시-인스턴스를-잘못-등록"><a href="#Codedeploy에서-배포그룹-생성-시-인스턴스를-잘못-등록" class="headerlink" title="Codedeploy에서 배포그룹 생성 시 인스턴스를 잘못 등록"></a>Codedeploy에서 배포그룹 생성 시 인스턴스를 잘못 등록</h2><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">The deployment failed because no instances were found for your deployment group.</span><br><span class="line">Check your deployment group settings to make sure the tags for your Amazon EC2 instances or Auto Scaling groups correctly identify the instances you want to deploy to, and then try again.</span><br></pre></td></tr></table></figure>

<p><img src="/images/20200608/codedeploy_%EC%9D%B8%EC%8A%A4%ED%84%B4%EC%8A%A4_%EC%84%A4%EC%A0%95.png" alt="CodeDeploy"></p>
<p>배포 그룹에서 태그 그룹으로 인스턴스를 지정할 때 위 사진처럼 일치하는 인스턴스가 존재한다는 문구가 나타나는 걸 확인해야한다.</p>
<hr>
<h2 id="생성한-버킷-리전과-인스턴스의-리전이-틀려서-에러-발생"><a href="#생성한-버킷-리전과-인스턴스의-리전이-틀려서-에러-발생" class="headerlink" title="생성한 버킷 리전과 인스턴스의 리전이 틀려서 에러 발생"></a>생성한 버킷 리전과 인스턴스의 리전이 틀려서 에러 발생</h2><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">payload:&quot;&#123;\&quot;error_code\&quot;:5,\&quot;script_name\&quot;:\&quot;\&quot;,\&quot;message\&quot;:\&quot;</span><br><span class="line">The bucket you are attempting to access must be addressed using the specified endpoint. Please send all future requests to this endpoint.\&quot;,\&quot;log\&quot;:\&quot;\&quot;&#125;&quot;&#125;</span><br></pre></td></tr></table></figure>

<p>위 에러 로그는 아래 디렉토리에 위치한 파일을 열어서 확인 할 수 있다.<br>shell script에서 작성한 echo도 아래 파일에서 함께 확인 할 수 있다.</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vim /opt/codedeploy-agent/deployment-root/deployment-logs/codedeploy-agent-deployments.log</span><br></pre></td></tr></table></figure>

<p><img src="/images/20200608/codedeploy_logfile.PNG" alt="CodeDeploy Log File"></p>

                    
                        


                    
                    
                        <p>
                            <a href="/2020/06/08/Codedeploy-%EC%97%B0%EB%8F%99-%EC%97%90%EB%9F%AC/#post-footer" class="postShorten-excerpt_link link" aria-label>
                                댓글 공유
                            </a>
                        </p>
                    
                </div>
            
        </div>
        
    </article>
    
    
    <article class="postShorten postShorten--thumbnailimg-bottom">
        <div class="postShorten-wrap">
            
            <div class="postShorten-header">
                <h1 class="postShorten-title">
                    
                        <a class="link-unstyled" href="/2020/06/06/Spring-Boot-Maven-Travis-CI-%EC%97%B0%EB%8F%99-%EC%97%90%EB%9F%AC/" aria-label=": Spring Boot + Maven Travis CI 연동 에러">
                            Spring Boot + Maven Travis CI 연동 에러
                        </a>
                    
                </h1>
                <div class="postShorten-meta">
    <time datetime="2020-06-06T20:17:56+09:00">
	
		    2020/06/06
    	
    </time>
    
</div>

            </div>
            
                <div class="postShorten-content">
                    <h2 id="에러"><a href="#에러" class="headerlink" title="에러"></a>에러</h2><p><img src="/images/20200601/travis_error.PNG" alt="Travis 권한 에러"></p>
<figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">./mvnw: Permission denied</span><br></pre></td></tr></table></figure>

<p>Spring Boot + Maven 프로젝트 Travis CI 연동 중 발생한 에러</p>
<hr>
<h2 id="해결"><a href="#해결" class="headerlink" title="해결"></a>해결</h2><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">before_install:</span><br><span class="line">  - chmod +x mvnw</span><br></pre></td></tr></table></figure>

<p>설정으로 권한 부여하여 해결</p>
<h2 id="전체-코드"><a href="#전체-코드" class="headerlink" title="전체 코드"></a>전체 코드</h2><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">language: java</span><br><span class="line">jdk:</span><br><span class="line">  - openjdk8</span><br><span class="line"></span><br><span class="line">branches:</span><br><span class="line">  only:</span><br><span class="line">    - master</span><br><span class="line"></span><br><span class="line"># Travis CI 서버의 Home</span><br><span class="line">cache:</span><br><span class="line">  directories:</span><br><span class="line">    - $HOME/.m2</span><br><span class="line"></span><br><span class="line">before_install:</span><br><span class="line">  - chmod +x mvnw</span><br><span class="line"></span><br><span class="line"># MAVEN 프로젝트는 필요 없음</span><br><span class="line">#script: &quot;./mvnw package&quot;</span><br><span class="line"></span><br><span class="line"># CI 실행 완료시 메일로 알람</span><br><span class="line">notifications:</span><br><span class="line">  email:</span><br><span class="line">    recipients:</span><br><span class="line">      - your@gmail.com</span><br></pre></td></tr></table></figure>

<hr>
<h2 id="참고-사이트"><a href="#참고-사이트" class="headerlink" title="참고 사이트"></a>참고 사이트</h2><ul>
<li><a target="_blank" rel="external nofollow noopener noreferrer" href="https://velog.io/@recordsbeat/travis-ci-maven-%EC%97%B0%EB%8F%99">https://velog.io/@recordsbeat/travis-ci-maven-%EC%97%B0%EB%8F%99</a></li>
</ul>

                    
                        


                    
                    
                        <p>
                            <a href="/2020/06/06/Spring-Boot-Maven-Travis-CI-%EC%97%B0%EB%8F%99-%EC%97%90%EB%9F%AC/#post-footer" class="postShorten-excerpt_link link" aria-label>
                                댓글 공유
                            </a>
                        </p>
                    
                </div>
            
        </div>
        
            <a href="/2020/06/06/Spring-Boot-Maven-Travis-CI-%EC%97%B0%EB%8F%99-%EC%97%90%EB%9F%AC/" aria-label=": Spring Boot + Maven Travis CI 연동 에러">
                <div class="postShorten-thumbnailimg">
                    <img alt src>
                </div>
            </a>
            
        
    </article>
    
    
    <article class="postShorten postShorten--thumbnailimg-bottom">
        <div class="postShorten-wrap">
            
            <div class="postShorten-header">
                <h1 class="postShorten-title">
                    
                        <a class="link-unstyled" href="/2020/05/30/Spring-Controller-Junit-Test/" aria-label=": Spring Controller Junit으로 Test하기">
                            Spring Controller Junit으로 Test하기
                        </a>
                    
                </h1>
                <div class="postShorten-meta">
    <time datetime="2020-05-30T15:14:57+09:00">
	
		    2020/05/30
    	
    </time>
    
</div>

            </div>
            
                <div class="postShorten-content">
                    <p>평소 Junit의 assertEquals로 알고리즘 코드만 test 하다가<br>토이 프로젝트에서도 Junit을 사용해보기 위해 Spring에서의 Junit Test 방법을 정리 해보자 한다</p>
<hr>
<h2 id="Test할-Controller"><a href="#Test할-Controller" class="headerlink" title="Test할 Controller"></a>Test할 Controller</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Controller</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">HomeController</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@GetMapping(&quot;/&quot;)</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">home</span><span class="params">(Locale locale, Model model)</span> </span>&#123;</span><br><span class="line">        Date date = <span class="keyword">new</span> Date();</span><br><span class="line">        DateFormat dateFormat = DateFormat.getDateTimeInstance(DateFormat.LONG, DateFormat.LONG, locale);</span><br><span class="line"></span><br><span class="line">        String formattedDate = dateFormat.format(date);</span><br><span class="line"></span><br><span class="line">        model.addAttribute(<span class="string">&quot;serverTime&quot;</span>, formattedDate );</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;home&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>index 페이지로 매핑되는 home 메서드만 존재하는 Controller</li>
</ul>
<hr>
<h2 id="standaloneSetup-메서드를-활용한-Test"><a href="#standaloneSetup-메서드를-활용한-Test" class="headerlink" title="standaloneSetup() 메서드를 활용한 Test"></a>standaloneSetup() 메서드를 활용한 Test</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">HomeControllerTest</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> MockMvc mockMvc;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Before</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setUp</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.mockMvc = MockMvcBuilders.standaloneSetup(<span class="keyword">new</span> HomeController()).build();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">homeTest</span><span class="params">()</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line"></span><br><span class="line">        mockMvc.perform(get(<span class="string">&quot;/&quot;</span>))</span><br><span class="line">        .andExpect(status().isOk())</span><br><span class="line">        .andExpect(model().attributeExists(<span class="string">&quot;serverTime&quot;</span>))</span><br><span class="line">        .andExpect(view().name(<span class="string">&quot;home&quot;</span>));</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>MockMvc 클래스를 통해 HTTP GET, POST 등에 대한 테스트를 할 수 있게 한다</p>
<ul>
<li>perform() : get 방식으로 url을 호출</li>
<li>status() : http status에 대해 테스트</li>
<li>model() : model에 “serverTime” attribute가 존재하는 지 확인</li>
<li>view() : return하는 view의 name이 “home”인지 확인</li>
</ul>
<p>위 메서드들을 정상적으로 사용하기 위해선 아래 처럼 메서드들을 import 시켜야한다</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="keyword">static</span> org.springframework.test.web.servlet.request.MockMvcRequestBuilders.get;</span><br><span class="line"><span class="keyword">import</span> <span class="keyword">static</span> org.springframework.test.web.servlet.result.MockMvcResultMatchers.model;</span><br><span class="line"><span class="keyword">import</span> <span class="keyword">static</span> org.springframework.test.web.servlet.result.MockMvcResultMatchers.status;</span><br><span class="line"><span class="keyword">import</span> <span class="keyword">static</span> org.springframework.test.web.servlet.result.MockMvcResultMatchers.view;</span><br></pre></td></tr></table></figure>

<hr>
<h2 id="webAppContextSetup-메서드를-활용한-Test"><a href="#webAppContextSetup-메서드를-활용한-Test" class="headerlink" title="webAppContextSetup() 메서드를 활용한 Test"></a>webAppContextSetup() 메서드를 활용한 Test</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RunWith(SpringRunner.class)</span></span><br><span class="line"><span class="meta">@ContextConfiguration(locations = &#123;&quot;file:src/main/webapp/WEB-INF/spring/appServlet/servlet-context.xml&quot;</span></span><br><span class="line"><span class="meta">        , &quot;file:src/main/webapp/WEB-INF/spring/root-context.xml&quot;</span></span><br><span class="line"><span class="meta">        , &quot;file:src/main/webapp/WEB-INF/spring/spring-security.xml&quot;&#125;)</span></span><br><span class="line"><span class="meta">@WebAppConfiguration</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">HomeControllerTest</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> WebApplicationContext context;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> MockMvc mockMvc;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Before</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setUp</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.mockMvc = MockMvcBuilders.webAppContextSetup(<span class="keyword">this</span>.context).build();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">homeTest</span><span class="params">()</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line"></span><br><span class="line">        mockMvc.perform(get(<span class="string">&quot;/&quot;</span>))</span><br><span class="line">        .andExpect(status().isOk())</span><br><span class="line">        .andExpect(model().attributeExists(<span class="string">&quot;serverTime&quot;</span>))</span><br><span class="line">        .andExpect(view().name(<span class="string">&quot;home&quot;</span>));</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="RunWith"><a href="#RunWith" class="headerlink" title="@RunWith"></a>@RunWith</h3><ul>
<li>Junit에 내장된 Runner외에 다른 실행자를 실행시킨다</li>
<li>위 코드에선 SpringRunner 실행자로 Test를 실행하는데 이때 SpringRunner class는 SpringJUnit4ClassRunner class를 상속받고 있다</li>
<li>테스트를 진행할 때 ApplicationContext를 만들고 관리하는데 이 때 싱글톤을 보장한다</li>
</ul>
<h3 id="ContextConfiguration"><a href="#ContextConfiguration" class="headerlink" title="@ContextConfiguration"></a>@ContextConfiguration</h3><ul>
<li>스프링 Bean 설정 파일의 위치를 지정한다</li>
<li>위 코드에서는 Controller는 servlet-context.xml, 그 외 Service, Repository 등은 root-context.xml, 암호화를 위한 bcryptPasswordEncoder bean은 spring-security.xml에 지정되어 있어 3개를 지정했다</li>
</ul>
<h3 id="WebAppConfiguration"><a href="#WebAppConfiguration" class="headerlink" title="@WebAppConfiguration"></a>@WebAppConfiguration</h3><ul>
<li>applicationContext의 웹 버전을 작성하는데 사용된다</li>
</ul>
<hr>
<h2 id="standalonesetup과-webAppContextSetup의-차이"><a href="#standalonesetup과-webAppContextSetup의-차이" class="headerlink" title="standalonesetup과 webAppContextSetup의 차이"></a>standalonesetup과 webAppContextSetup의 차이</h2><p>standalonesetup() 메서드는 테스트할 컨트롤러를 수동으로 초기화해서 주입하고, webAppContextSetup() 메서드는 스프링의 ApplicationContext의 인스턴스로 동작한다</p>
<p>standalonesetup() 메서드는 컨트롤러에 집중하여 테스트할 때 사용되고<br>webAppContextSetup() 메서드는 스프링의 DI 컨테이너를 이용해 스프링 MVC 동작을 재현해서 테스트한다</p>
<hr>
<h2 id="번외-java-lang-NoClassDefFoundError-javax-servlet-SessionCookieConfig-에러"><a href="#번외-java-lang-NoClassDefFoundError-javax-servlet-SessionCookieConfig-에러" class="headerlink" title="번외 java.lang.NoClassDefFoundError: javax/servlet/SessionCookieConfig 에러"></a>번외 java.lang.NoClassDefFoundError: javax/servlet/SessionCookieConfig 에러</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">java.lang.NoClassDefFoundError: javax/servlet/SessionCookieConfig</span><br><span class="line">    at org.springframework.test.web.servlet.setup.StandaloneMockMvcBuilder.initWebAppContext(StandaloneMockMvcBuilder.java:<span class="number">339</span>)</span><br><span class="line">    at org.springframework.test.web.servlet.setup.AbstractMockMvcBuilder.build(AbstractMockMvcBuilder.java:<span class="number">139</span>)</span><br><span class="line">    at com.toon.controller.HomeControllerTest.setUp(HomeControllerTest.java:<span class="number">25</span>)</span><br><span class="line">    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)</span><br><span class="line">    at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)</span><br><span class="line">    at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)</span><br><span class="line">    at java.lang.reflect.Method.invoke(Unknown Source)</span><br><span class="line">    at org.junit.runners.model.FrameworkMethod$<span class="number">1.</span>runReflectiveCall(FrameworkMethod.java:<span class="number">50</span>)</span><br><span class="line">    at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:<span class="number">12</span>)</span><br><span class="line">    at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:<span class="number">47</span>)</span><br><span class="line">    at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:<span class="number">24</span>)</span><br><span class="line">    ... <span class="number">26</span> more</span><br></pre></td></tr></table></figure>

<ul>
<li>Spring 4.0 이상에서 Junit으로 테스트 시 servlet 3.0 API를 사용하기 때문에 발생</li>
<li>pom.xml에서 servlet 버전을 3.0.1 이상으로 올려주면 해결</li>
<li>artifactId가 <strong>javax.servlet-api</strong> 으로 변경 됐으므로 함께 변경해준다.</li>
</ul>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>javax.servlet<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>javax.servlet-api<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>3.1.0<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">scope</span>&gt;</span>provided<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h2 id="참고-사이트"><a href="#참고-사이트" class="headerlink" title="참고 사이트"></a>참고 사이트</h2><ul>
<li><a target="_blank" rel="external nofollow noopener noreferrer" href="https://itmore.tistory.com/entry/MockMvc-%EC%83%81%EC%84%B8%EC%84%A4%EB%AA%85">https://itmore.tistory.com/entry/MockMvc-%EC%83%81%EC%84%B8%EC%84%A4%EB%AA%85</a></li>
<li><a target="_blank" rel="external nofollow noopener noreferrer" href="https://jdm.kr/blog/165">https://jdm.kr/blog/165</a></li>
<li><a target="_blank" rel="external nofollow noopener noreferrer" href="https://effectivesquid.tistory.com/entry/Spring-test-%EC%99%80-Junit4%EB%A5%BC-%EC%9D%B4%EC%9A%A9%ED%95%9C-%ED%85%8C%EC%8A%A4%ED%8A%B8">https://effectivesquid.tistory.com/entry/Spring-test-%EC%99%80-Junit4%EB%A5%BC-%EC%9D%B4%EC%9A%A9%ED%95%9C-%ED%85%8C%EC%8A%A4%ED%8A%B8</a></li>
<li><a target="_blank" rel="external nofollow noopener noreferrer" href="https://www.baeldung.com/spring-webappconfiguration">https://www.baeldung.com/spring-webappconfiguration</a></li>
</ul>

                    
                        


                    
                    
                        <p>
                            <a href="/2020/05/30/Spring-Controller-Junit-Test/#post-footer" class="postShorten-excerpt_link link" aria-label>
                                댓글 공유
                            </a>
                        </p>
                    
                </div>
            
        </div>
        
            <a href="/2020/05/30/Spring-Controller-Junit-Test/" aria-label=": Spring Controller Junit으로 Test하기">
                <div class="postShorten-thumbnailimg">
                    <img alt src>
                </div>
            </a>
            
        
    </article>
    
    
    <article class="postShorten postShorten--thumbnailimg-bottom">
        <div class="postShorten-wrap">
            
            <div class="postShorten-header">
                <h1 class="postShorten-title">
                    
                        <a class="link-unstyled" href="/2020/05/26/%EB%B0%B1%EC%A4%80-11047%EB%B2%88-%EB%8F%99%EC%A0%84-0/" aria-label=": 백준 11047번: 동전 0">
                            백준 11047번: 동전 0
                        </a>
                    
                </h1>
                <div class="postShorten-meta">
    <time datetime="2020-05-26T11:53:32+09:00">
	
		    2020/05/26
    	
    </time>
    
</div>

            </div>
            
                <div class="postShorten-content">
                    <h2 id="문제"><a href="#문제" class="headerlink" title="문제"></a>문제</h2><p><a target="_blank" rel="external nofollow noopener noreferrer" href="https://www.acmicpc.net/problem/11047">https://www.acmicpc.net/problem/11047</a></p>
<hr>
<h2 id="코드"><a href="#코드" class="headerlink" title="코드"></a>코드</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> IOException </span>&#123;</span><br><span class="line">    BufferedReader br = <span class="keyword">new</span> BufferedReader(<span class="keyword">new</span> InputStreamReader(System.in));</span><br><span class="line">    String coinAndMoney = br.readLine();</span><br><span class="line"></span><br><span class="line">    String[] coinAndMoneyArray = coinAndMoney.split(<span class="string">&quot; &quot;</span>);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">int</span> coinAmount = Integer.parseInt(coinAndMoneyArray[<span class="number">0</span>]);</span><br><span class="line">    <span class="keyword">long</span> money = Long.parseLong(coinAndMoneyArray[<span class="number">1</span>]);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">long</span>[] coinCategory = getCoincategory(coinAmount, br);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">long</span> answer = solution(coinAmount, money, coinCategory);</span><br><span class="line"></span><br><span class="line">    System.out.println(answer);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">long</span>[] getCoincategory(<span class="keyword">int</span> coinAmount, BufferedReader br) <span class="keyword">throws</span> IOException &#123;</span><br><span class="line">    <span class="keyword">long</span>[] result = <span class="keyword">new</span> <span class="keyword">long</span>[coinAmount];</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; coinAmount; i++) &#123;</span><br><span class="line"></span><br><span class="line">        result[i] = Integer.parseInt(br.readLine());</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> result;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">long</span> <span class="title">solution</span><span class="params">(<span class="keyword">int</span> n, <span class="keyword">long</span> money, <span class="keyword">long</span>[] array)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">long</span> answer = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = n - <span class="number">1</span>; i &gt;= <span class="number">0</span>; i--) &#123;</span><br><span class="line">        <span class="keyword">if</span> (array[i] &gt; money) &#123;</span><br><span class="line">            <span class="keyword">continue</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        answer += (money / array[i]);</span><br><span class="line">        money %= array[i];</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (money == <span class="number">0</span>) &#123;</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> answer;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<hr>
<h2 id="흐름"><a href="#흐름" class="headerlink" title="흐름"></a>흐름</h2><ol>
<li>돈의 종류 만큼 돌면서 큰 수 부터 가지고 있는 돈을 나눔</li>
<li>돈의 가치가 더 큰 경우엔 나눌 수 없으므로 continue</li>
<li>돈으로 갖고 있는 돈을 나눈 값을 더하고 남은 값은 다시 나눠야 하므로 money에 다시 저장함</li>
<li>momeny가 0이 되면 나눌 돈이 없는 것이므로 사용한 돈 갯수 return</li>
<li>끝</li>
</ol>
<hr>
<h2 id="결과"><a href="#결과" class="headerlink" title="결과"></a>결과</h2><p><img src="/images/20200526/11047.PNG" alt="결과"></p>
<hr>
<h2 id="테스트-케이스"><a href="#테스트-케이스" class="headerlink" title="테스트 케이스"></a>테스트 케이스</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">long</span>[] array = <span class="keyword">new</span> <span class="keyword">long</span>[] &#123;<span class="number">1</span>,<span class="number">5</span>,<span class="number">10</span>,<span class="number">50</span>,<span class="number">100</span>,<span class="number">500</span>,<span class="number">1000</span>,<span class="number">5000</span>,<span class="number">10000</span>,<span class="number">50000</span>&#125;;</span><br><span class="line">assertEquals(<span class="number">6</span>, test.solution(<span class="number">10</span>, <span class="number">4200</span>, array));</span><br><span class="line">assertEquals(<span class="number">12</span>, test.solution(<span class="number">10</span>, <span class="number">4790</span>, array));</span><br><span class="line">assertEquals(<span class="number">1</span>, test.solution(<span class="number">10</span>, <span class="number">50000</span>, array));</span><br><span class="line">assertEquals(<span class="number">2000</span>, test.solution(<span class="number">10</span>, <span class="number">100000000</span>, array));</span><br><span class="line"></span><br><span class="line">array = <span class="keyword">new</span> <span class="keyword">long</span>[] &#123;<span class="number">1</span>&#125;;</span><br><span class="line">assertEquals(<span class="number">2</span>, test.solution(<span class="number">1</span>, <span class="number">2</span>, array));</span><br><span class="line">assertEquals(<span class="number">1</span>, test.solution(<span class="number">1</span>, <span class="number">1</span>, array));</span><br><span class="line">assertEquals(<span class="number">100000000</span>, test.solution(<span class="number">1</span>, <span class="number">100000000</span>, array));</span><br><span class="line"></span><br><span class="line">array = <span class="keyword">new</span> <span class="keyword">long</span>[] &#123;<span class="number">1</span>, <span class="number">5</span>&#125;;</span><br><span class="line">assertEquals(<span class="number">1</span>, test.solution(<span class="number">2</span>, <span class="number">5</span>, array));</span><br><span class="line"></span><br><span class="line">array = <span class="keyword">new</span> <span class="keyword">long</span>[] &#123;<span class="number">1</span>, <span class="number">3</span>&#125;;</span><br><span class="line">assertEquals(<span class="number">2</span>, test.solution(<span class="number">2</span>, <span class="number">4</span>, array));</span><br><span class="line"></span><br><span class="line">array = <span class="keyword">new</span> <span class="keyword">long</span>[] &#123;<span class="number">1</span>, <span class="number">100</span>&#125;;</span><br><span class="line">assertEquals(<span class="number">1</span>, test.solution(<span class="number">2</span>, <span class="number">100</span>, array));</span><br><span class="line"></span><br><span class="line">array = <span class="keyword">new</span> <span class="keyword">long</span>[] &#123;<span class="number">5000</span>&#125;;</span><br><span class="line">assertEquals(<span class="number">1</span>, test.solution(<span class="number">1</span>, <span class="number">5000</span>, array));</span><br></pre></td></tr></table></figure>

<ul>
<li>나머지는 입력 값 처리이고 solution 메서드가 주요 로직이므로 solution 메서드를 테스트</li>
<li>이렇게 테스트 할 경우 입력처리 때문에 에러가 발생 할 수 있으니 꼭 java application으로 함께 테스트 해볼 것</li>
</ul>

                    
                        


                    
                    
                        <p>
                            <a href="/2020/05/26/%EB%B0%B1%EC%A4%80-11047%EB%B2%88-%EB%8F%99%EC%A0%84-0/#post-footer" class="postShorten-excerpt_link link" aria-label>
                                댓글 공유
                            </a>
                        </p>
                    
                </div>
            
        </div>
        
            <a href="/2020/05/26/%EB%B0%B1%EC%A4%80-11047%EB%B2%88-%EB%8F%99%EC%A0%84-0/" aria-label=": 백준 11047번: 동전 0">
                <div class="postShorten-thumbnailimg">
                    <img alt src>
                </div>
            </a>
            
        
    </article>
    
    <div class="pagination-bar">
    <ul class="pagination">
        
          <li class="pagination-prev">
            <a class="btn btn--default btn--small" href="/page/6/" aria-label="최근 포스트">
              <i class="fa fa-angle-left text-base icon-mr"></i>
              <span>최근 포스트</span>
            </a>
          </li>
        
        
          <li class="pagination-next">
            <a class="btn btn--default btn--small" href="/page/8/" aria-label="이전 포스트">
              <span>이전 포스트</span>
              <i class="fa fa-angle-right text-base icon-ml"></i>
            </a>
          </li>
        
        <li class="pagination-number">page 7 of 11</li>
    </ul>
</div>

</section>


                <footer id="footer" class="main-content-wrap">
    <span class="copyrights">
        Copyrights &copy; 2022 Junggu Ji. All Rights Reserved.
    </span>
</footer>

            </div>
            
        </div>
        


<div id="about">
    <div id="about-card">
        <div id="about-btn-close">
            <i class="fa fa-times"></i>
        </div>
        
            <h4 id="about-card-name">Junggu Ji</h4>
        
            <div id="about-card-bio"><p>author.bio</p>
</div>
        
        
            <div id="about-card-job">
                <i class="fa fa-briefcase"></i>
                <br>
                <p>author.job</p>

            </div>
        
        
    </div>
</div>

        
        
<div id="cover" style="background-image:url('/assets/images/cover.jpg');"></div>
        <!--SCRIPTS-->

<script src="/assets/js/script-goamtf3h90u4wvmhg5penagquqoptje05tyii1tz44r8vwvh6klg97rf1weo.min.js"></script>

<!--SCRIPTS END-->





    </body>
</html>
